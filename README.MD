# ğŸ¦ CrediYa S.A.S. - Sistema de GestiÃ³n de PrÃ©stamos

[![Java](https://img.shields.io/badge/Java-17-orange.svg)](https://www.oracle.com/java/)
[![Maven](https://img.shields.io/badge/Maven-3.8+-blue.svg)](https://maven.apache.org/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-blue.svg)](https://www.mysql.com/)
[![Docker](https://img.shields.io/badge/Docker-latest-blue.svg)](https://www.docker.com/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

Sistema de gestiÃ³n de prÃ©stamos y cobros de cartera desarrollado en Java, implementando principios de POO, persistencia dual (MySQL + Archivos), y programaciÃ³n funcional con Streams y Lambdas.

---

## ğŸ“‹ Tabla de Contenidos

- [CaracterÃ­sticas](#-caracterÃ­sticas)
- [TecnologÃ­as](#-tecnologÃ­as-utilizadas)
- [Requisitos Previos](#-requisitos-previos)
- [InstalaciÃ³n](#-instalaciÃ³n)
- [Uso](#-uso)
- [Estructura del Proyecto](#-estructura-del-proyecto)
- [Arquitectura](#-arquitectura)
- [Persistencia de Datos](#-persistencia-de-datos)
- [Ejemplos de Uso](#-ejemplos-de-uso)
- [Capturas de Pantalla](#-capturas-de-pantalla)
- [DocumentaciÃ³n Adicional](#-documentaciÃ³n-adicional)
- [Autor](#-autor)
- [Licencia](#-licencia)

---

## âœ¨ CaracterÃ­sticas

### MÃ³dulos Principales

- **ğŸ‘¥ GestiÃ³n de Empleados**
  - Registro, consulta, actualizaciÃ³n y eliminaciÃ³n (CRUD completo)
  - BÃºsqueda por ID, documento o rol
  - CÃ¡lculo automÃ¡tico de nÃ³mina mensual y anual
  - ValidaciÃ³n de eliminaciÃ³n (verifica prÃ©stamos asociados)

- **ğŸ‘¤ GestiÃ³n de Clientes**
  - CRUD completo de clientes
  - BÃºsqueda por ID o documento
  - Consulta de prÃ©stamos asociados
  - ValidaciÃ³n de eliminaciÃ³n

- **ğŸ’° GestiÃ³n de PrÃ©stamos**
  - CreaciÃ³n de prÃ©stamos con cÃ¡lculo automÃ¡tico de intereses
  - CÃ¡lculo de cuota mensual y monto total
  - Cambio de estado (pendiente/pagado/vencido)
  - DetecciÃ³n automÃ¡tica de prÃ©stamos vencidos
  - ValidaciÃ³n: un cliente solo puede tener un prÃ©stamo activo

- **ğŸ’³ GestiÃ³n de Pagos**
  - Registro de pagos con actualizaciÃ³n automÃ¡tica de saldo
  - HistÃ³rico de pagos por prÃ©stamo
  - CÃ¡lculo de total recaudado
  - Cambio automÃ¡tico de estado a "pagado" cuando saldo = 0

- **ğŸ“Š Reportes Avanzados**
  - Reporte general del sistema
  - Reportes de clientes y prÃ©stamos
  - PrÃ©stamos vencidos y clientes morosos
  - **Reportes con Streams/Lambdas:**
    - PrÃ©stamos activos (filter)
    - Clientes morosos (filter + map + distinct)
    - Total prestado por empleado (groupingBy)
    - PrÃ©stamos ordenados por monto (sorted)
    - EstadÃ­sticas generales (Collectors)

### CaracterÃ­sticas TÃ©cnicas

- âœ… **POO**: Herencia (Persona â†’ Cliente, Empleado), Polimorfismo, Encapsulamiento
- âœ… **Persistencia Dual**: MySQL (JDBC) + Archivos de texto (.txt)
- âœ… **PatrÃ³n DAO**: ImplementaciÃ³n con interface genÃ©rica `IDao<T>`
- âœ… **Capa de Servicios**: LÃ³gica de negocio separada de persistencia
- âœ… **Excepciones Personalizadas**: Manejo robusto de errores
- âœ… **Validaciones**: Clase `Validador` con regex para correos, documentos, etc.
- âœ… **Streams API**: Uso intensivo de filter, map, collect, sorted, groupingBy
- âœ… **Lambdas**: Expresiones lambda en reportes y operaciones de colecciones
- âœ… **Interfaz Colorida**: Colores ANSI para mejor experiencia de usuario
- âœ… **Docker**: MySQL y phpMyAdmin containerizados

---

## ğŸ› ï¸ TecnologÃ­as Utilizadas

### Lenguajes y Frameworks

| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| **Java** | 17 LTS | Lenguaje de programaciÃ³n principal |
| **Maven** | 3.8+ | GestiÃ³n de dependencias y build |
| **MySQL** | 8.0 | Base de datos relacional |
| **Docker** | Latest | ContainerizaciÃ³n de MySQL y phpMyAdmin |
| **JDBC** | 8.0.33 | Conectividad con MySQL |

### Dependencias (pom.xml)
```xml
<dependencies>
    <!-- MySQL Connector -->
    <dependency>
        <groupId>com.mysql</groupId>
        <artifactId>mysql-connector-j</artifactId>
        <version>8.0.33</version>
    </dependency>
</dependencies>
```

---

## ğŸ“¦ Requisitos Previos

Antes de instalar, asegÃºrate de tener:

- âœ… **Java JDK 17** o superior
- âœ… **Maven 3.8** o superior
- âœ… **Docker** y **Docker Compose**
- âœ… **Git** (para clonar el repositorio)
- âœ… Sistema Operativo: Linux, macOS o Windows con WSL2

### Verificar Instalaciones
```bash
# Verificar Java
java -version

# Verificar Maven
mvn -version

# Verificar Docker
docker --version
docker-compose --version
```

---

## ğŸš€ InstalaciÃ³n

### Paso 1: Clonar el Repositorio
```bash
git clone https://github.com/Eduar07/SistemaDeCreditos.git
cd SistemaDeCreditos
```

### Paso 2: Iniciar Docker (MySQL + phpMyAdmin)
```bash
docker-compose up -d
```

**Esto iniciarÃ¡:**
- MySQL en el puerto `3306`
- phpMyAdmin en `http://localhost:8080`

**Credenciales:**
- Usuario: `root`
- ContraseÃ±a: `crediya123`
- Base de datos: `crediya_db`

### Paso 3: Compilar el Proyecto
```bash
cd proyecto
mvn clean compile
```

### Paso 4: Ejecutar el Sistema
```bash
mvn exec:java -Dexec.mainClass="com.eduar.MenuPrincipal"
```

---

## ğŸ® Uso

### MenÃº Principal

Al iniciar, verÃ¡s el menÃº principal con colores:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         MENÃš PRINCIPAL               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  1. GestiÃ³n de Empleados             â•‘
â•‘  2. GestiÃ³n de Clientes              â•‘
â•‘  3. GestiÃ³n de PrÃ©stamos             â•‘
â•‘  4. GestiÃ³n de Pagos                 â•‘
â•‘  5. Reportes                         â•‘
â•‘  0. Salir                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Flujo de Trabajo TÃ­pico

1. **Registrar Empleado** (MenÃº 1 â†’ OpciÃ³n 1)
2. **Registrar Cliente** (MenÃº 2 â†’ OpciÃ³n 1)
3. **Crear PrÃ©stamo** (MenÃº 3 â†’ OpciÃ³n 1)
4. **Registrar Pago** (MenÃº 4 â†’ OpciÃ³n 1)
5. **Ver Reportes** (MenÃº 5)

---

## ğŸ“ Estructura del Proyecto
```
SistemaDeCreditos/
â”œâ”€â”€ docker-compose.yml          # ConfiguraciÃ³n Docker
â”œâ”€â”€ proyecto/
â”‚   â”œâ”€â”€ pom.xml                 # ConfiguraciÃ³n Maven
â”‚   â”œâ”€â”€ data/                   # Archivos de persistencia (.txt)
â”‚   â”‚   â”œâ”€â”€ empleados.txt
â”‚   â”‚   â”œâ”€â”€ clientes.txt
â”‚   â”‚   â”œâ”€â”€ prestamos.txt
â”‚   â”‚   â””â”€â”€ pagos.txt
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ main/
â”‚           â””â”€â”€ java/
â”‚               â””â”€â”€ com/
â”‚                   â””â”€â”€ eduar/
â”‚                       â”œâ”€â”€ MenuPrincipal.java     # Punto de entrada
â”‚                       â”œâ”€â”€ dao/                   # Capa de acceso a datos
â”‚                       â”‚   â”œâ”€â”€ IDao.java         # Interface genÃ©rica
â”‚                       â”‚   â”œâ”€â”€ ClienteDAOImpl.java
â”‚                       â”‚   â”œâ”€â”€ EmpleadoDAOImpl.java
â”‚                       â”‚   â”œâ”€â”€ PrestamoDAOImpl.java
â”‚                       â”‚   â””â”€â”€ PagoDAOImpl.java
â”‚                       â”œâ”€â”€ excepcion/             # Excepciones personalizadas
â”‚                       â”‚   â”œâ”€â”€ ClienteException.java
â”‚                       â”‚   â”œâ”€â”€ EmpleadoException.java
â”‚                       â”‚   â”œâ”€â”€ PagoException.java
â”‚                       â”‚   â””â”€â”€ PrestamoException.java
â”‚                       â”œâ”€â”€ modelo/                # Clases del dominio
â”‚                       â”‚   â”œâ”€â”€ Persona.java      # Clase abstracta padre
â”‚                       â”‚   â”œâ”€â”€ Cliente.java
â”‚                       â”‚   â”œâ”€â”€ Empleado.java
â”‚                       â”‚   â”œâ”€â”€ Prestamo.java
â”‚                       â”‚   â””â”€â”€ Pago.java
â”‚                       â”œâ”€â”€ servicio/              # LÃ³gica de negocio
â”‚                       â”‚   â”œâ”€â”€ ClienteServicio.java
â”‚                       â”‚   â”œâ”€â”€ EmpleadoServicio.java
â”‚                       â”‚   â”œâ”€â”€ PrestamoServicio.java
â”‚                       â”‚   â”œâ”€â”€ PagoServicio.java
â”‚                       â”‚   â””â”€â”€ ReporteServicio.java
â”‚                       â””â”€â”€ util/                  # Utilidades
â”‚                           â”œâ”€â”€ ArchivoUtil.java
â”‚                           â”œâ”€â”€ ColoresConsola.java
â”‚                           â”œâ”€â”€ ConexionDb.java
â”‚                           â”œâ”€â”€ ConstantesJava.java
â”‚                           â””â”€â”€ Validador.java
â””â”€â”€ docs/
    â”œâ”€â”€ Manual.md               # Manual de usuario
    â”œâ”€â”€ UML.png                 # Diagrama de clases
    â””â”€â”€ capturas/               # Capturas de pantalla
```

---

## ğŸ—ï¸ Arquitectura

### PatrÃ³n de Capas (Layered Architecture)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Capa de PresentaciÃ³n            â”‚
â”‚     (MenuPrincipal.java)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Capa de Servicio                â”‚
â”‚     (LÃ³gica de Negocio)             â”‚
â”‚  - ClienteServicio                  â”‚
â”‚  - EmpleadoServicio                 â”‚
â”‚  - PrestamoServicio                 â”‚
â”‚  - PagoServicio                     â”‚
â”‚  - ReporteServicio                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Capa DAO (Persistencia)         â”‚
â”‚  - IDao<T> (Interface)              â”‚
â”‚  - ClienteDAOImpl                   â”‚
â”‚  - EmpleadoDAOImpl                  â”‚
â”‚  - PrestamoDAOImpl                  â”‚
â”‚  - PagoDAOImpl                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MySQL    â”‚  â”‚  Archivos .txt â”‚
â”‚   (JDBC)   â”‚  â”‚  (data/)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Modelo de Dominio (Herencia)
```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Persona    â”‚ (abstracta)
         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
         â”‚ - id         â”‚
         â”‚ - nombre     â”‚
         â”‚ - documento  â”‚
         â”‚ - correo     â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cliente    â”‚  â”‚   Empleado    â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ - telefono   â”‚  â”‚ - rol         â”‚
â”‚              â”‚  â”‚ - salario     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Persistencia de Datos

### Doble Persistencia (MySQL + Archivos)

El sistema implementa **persistencia dual** para cumplir con los requisitos acadÃ©micos y proporcionar un backup automÃ¡tico:

#### 1. **MySQL (Principal)**
- Base de datos relacional con 4 tablas
- Relaciones con claves forÃ¡neas (FK)
- Consultas con JDBC y PreparedStatement
- Transacciones para integridad de datos

#### 2. **Archivos de Texto (Backup)**
- Formato: CSV con delimitador `|`
- UbicaciÃ³n: `data/`
- Archivos generados:
  - `empleados.txt`
  - `clientes.txt`
  - `prestamos.txt`
  - `pagos.txt`

**Ejemplo de archivo `empleados.txt`:**
```
5|Laura MartÃ­nez|1122334455|laura.martinez@crediya.com|Contador|3200000.00
```

### SincronizaciÃ³n AutomÃ¡tica

Cada operaciÃ³n de **guardar** se escribe en **ambos sistemas**:
```java
// En el DAO
public void guardar(Empleado empleado) {
    // 1. Guardar en MySQL
    // ... cÃ³digo JDBC ...
    
    // 2. Guardar en archivo
    ArchivoUtil.guardarLinea("data/empleados.txt", linea);
}
```

---

## ğŸ“– Ejemplos de Uso

### Ejemplo 1: Crear un PrÃ©stamo Completo
```java
// 1. Registrar Cliente
Cliente cliente = new Cliente("Juan PÃ©rez", "1098765432", 
                               "juan@email.com", "3227886539");
clienteServicio.registrarCliente(cliente);

// 2. Registrar Empleado
Empleado empleado = new Empleado("Ana GarcÃ­a", "1234567890",
                                  "ana@crediya.com", "Asesor", 2800000);
empleadoServicio.registrarEmpleado(empleado);

// 3. Crear PrÃ©stamo
// Monto: $5,000,000 | InterÃ©s: 5.5% | Cuotas: 12 meses
prestamoServicio.crearPrestamo(
    cliente.getId(), 
    empleado.getId(), 
    5000000, 
    5.5, 
    12, 
    LocalDate.now()
);

// Resultado:
// Monto total: $5,275,000 (capital + interÃ©s)
// Cuota mensual: $439,583.33
```

### Ejemplo 2: Registrar un Pago
```java
// Registrar pago de $500,000 al prÃ©stamo #1
pagoServicio.registrarPago(1, 500000, LocalDate.now(), "Pago inicial");

// El sistema automÃ¡ticamente:
// 1. Reduce el saldo pendiente
// 2. Guarda en MySQL
// 3. Guarda en data/pagos.txt
// 4. Cambia estado a "pagado" si saldo = 0
```

### Ejemplo 3: Reporte con Streams
```java
// Obtener clientes morosos usando Streams
ArrayList<Cliente> morosos = prestamoServicio.listarTodos().stream()
    .filter(p -> p.estaVencido())
    .map(Prestamo::getCliente)
    .distinct()
    .collect(Collectors.toCollection(ArrayList::new));

// Total prestado por empleado usando groupingBy
Map<String, Double> totalPorEmpleado = prestamos.stream()
    .collect(Collectors.groupingBy(
        p -> p.getEmpleado().getNombre(),
        Collectors.summingDouble(Prestamo::getMonto)
    ));
```

---

## ğŸ“¸ Capturas de Pantalla

### MenÃº Principal
![Menu Principal](docs/UML.png)

### Registro de PrÃ©stamo
![Crear Prestamo](docs/crear_prestamo.png)

### Reporte de EstadÃ­sticas
![Estadisticas](docs/estadisticas.png)

---

## ğŸ“š DocumentaciÃ³n Adicional

- **[Manual de Usuario](docs/Manual.md)** - GuÃ­a paso a paso para usuarios finales
- **[Diagrama UML](docs/diagrama_clases.png)** - Diagrama de clases completo
- **JavaDoc** - DocumentaciÃ³n del cÃ³digo en `target/site/apidocs/`

### Generar JavaDoc
```bash
mvn javadoc:javadoc
```

El JavaDoc estarÃ¡ disponible en: `proyecto/target/site/apidocs/index.html`

---

## ğŸ‘¨â€ğŸ’» Autor

**Eduar Humberto Guerrero Vergel**
- ğŸ“§ Email: edhuarguerrero@gmail.com
- ğŸ™ GitHub: https://github.com/Eduar07


**InstituciÃ³n:** [Campusland]  
**Fecha:** Diciembre 2025  
**VersiÃ³n:** 1.0

---

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la Licencia MIT. Consulta el archivo [LICENSE](LICENSE) para mÃ¡s detalles.

---

## ğŸ™ Agradecimientos

- Profesor: Adrian Parchao
- DocumentaciÃ³n oficial de Java, MySQL y Maven

---

## ğŸ“ Soporte

Si encuentras algÃºn error o tienes sugerencias:

1. Abre un **Issue** en GitHub
2. EnvÃ­a un correo a [eduarguerrero@gmail.com]
3. Revisa la secciÃ³n de **[Issues]https://github.com/Eduar07/SistemaDeCreditos.git

---

**â­ Si este proyecto te fue Ãºtil, dale una estrella en GitHub!**